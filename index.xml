<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Pan Feng on Pan Feng</title>
    <link>panfeng0119.github.io/</link>
    <description>Recent content in Pan Feng on Pan Feng</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy; 2018</copyright>
    <lastBuildDate>Sun, 15 Oct 2017 00:00:00 +0800</lastBuildDate>
    <atom:link href="panfeng0119.github.io/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Hugo &#43; GitHub 部署个人站点</title>
      <link>panfeng0119.github.io/post/host_on_github/</link>
      <pubDate>Sat, 15 Sep 2018 00:00:00 +0800</pubDate>
      
      <guid>panfeng0119.github.io/post/host_on_github/</guid>
      <description>

&lt;p&gt;完整内容请参阅 &lt;a href=&#34;https://gohugo.io/hosting-and-deployment/&#34; target=&#34;_blank&#34;&gt;Hosting &amp;amp; Deployment&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;我们可以将 Hugo 生成的站点托管在 GitHub Pages 上，并使用简单的shell脚本自动完成整个过程。假设您已完成：&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;已安装 &lt;a href=&#34;https://git-scm.com/downloads&#34; target=&#34;_blank&#34;&gt;Git&lt;/a&gt; 版本 2.8 以上.&lt;/li&gt;
&lt;li&gt;需要发布的Hugo网站，起码已完成&lt;a href=&#34;https://gohugo.io/getting-started/quick-start/&#34; target=&#34;_blank&#34;&gt;快速入门&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;在 &lt;a href=&#34;https://github.com/&#34; target=&#34;_blank&#34;&gt;GitHub&lt;/a&gt; 中创建好了仓库: &amp;lt;USERNAME&amp;gt;.github.io.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;b-准备工作-b&#34;&gt;&lt;b&gt;准备工作&lt;/b&gt;&lt;/h2&gt;

&lt;p&gt;不同的仓库类型，需要托管的分支是不同的。具体描述，请参阅文档 &lt;a href=&#34;https://help.github.com/articles/user-organization-and-project-pages/#user--organization-pages&#34; target=&#34;_blank&#34;&gt;GitHub Pages doc&lt;/a&gt;，以确定您要创建哪种类型的站点.&lt;/p&gt;

&lt;p&gt;从逻辑上，常用两种类型的仓库，对应的分支为&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;left&#34;&gt;&lt;code&gt;https://github.com/&amp;lt;USERNAME&amp;gt;/&amp;lt;USERNAME&amp;gt;.github.io&lt;/code&gt;&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;&lt;code&gt;https://&amp;lt;USERNAME&amp;gt;.github.io&lt;/code&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;网站分支 -&amp;gt; &lt;font face=&#34;Aria&#34;&gt;&lt;b&gt;gh-pages&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;网站分支 -&amp;gt; &lt;font face=&#34;Aria&#34;&gt;&lt;b&gt;master&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;left&#34;&gt;源码分支 -&amp;gt; &lt;font face=&#34;微软雅黑&#34;&gt;&lt;b&gt;任意&lt;/b&gt; &lt;/font&gt;&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;源码分支 -&amp;gt; &lt;font face=&#34;微软雅黑&#34;&gt;&lt;b&gt;任意&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;我们用第二种类型，需要注意两点：&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;仓库名必须用&amp;lt;USERNAME&amp;gt;.github.io &lt;br&gt;&lt;/li&gt;
&lt;li&gt;网站内容必须存放在 master 分支&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;一-b-通过两个仓库来创建-github-pages-b&#34;&gt;一、&lt;b&gt;通过两个仓库来创建 GitHub Pages&lt;/b&gt;&lt;/h2&gt;

&lt;p&gt;最简单的方法就是将 Hugo 文件和生成的内容分别发布到两个不同的仓库(Repositoriy)中。&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;创建两个仓库 &lt;p&gt; 一个存放源码的仓库： &lt;code&gt;&amp;lt;YOUR-PROJECT&amp;gt;&lt;/code&gt;  &lt;font color=#F08080&gt;（如：blog）&lt;/font&gt; &lt;/br&gt; 一个托管Hugo网站的仓库： &lt;code&gt;&amp;lt;USERNAME&amp;gt;.github.io&lt;/code&gt; &lt;/p&gt;&lt;/li&gt;
&lt;li&gt;克隆源码仓库到本地 &lt;p&gt; git clone &amp;lt;OUR-PROJECT-URL&amp;gt; &lt;/br&gt; cd &amp;lt;YOUR-PROJECT&amp;gt; &lt;/p&gt;&lt;/li&gt;
&lt;li&gt;启动网站服务，确保网站能正常运行 &lt;p&gt; hugo server &lt;/br&gt; 访问网站 &lt;a href=&#34;http://localhost:1313&#34; target=&#34;_blank&#34;&gt;http://localhost:1313&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;创建 git 子模块，命名为 &lt;em&gt;public&lt;/em&gt; &lt;font color=#F08080&gt;（用来托管网站）&lt;/font&gt; &lt;p&gt; git submodule add -b master &lt;code&gt;git@github.com:&amp;lt;USERNAME&amp;gt;/&amp;lt;USERNAME&amp;gt;.github.io.git public&lt;/code&gt; &lt;em&gt;public&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;运行脚本，将网站 push 到&lt;code&gt;&amp;lt;USERNAME&amp;gt;.github.io&lt;/code&gt; &lt;p&gt; chmod +x deploy.sh  ./deploy.sh&amp;rdquo;提交消息(可选)&amp;rdquo; &lt;/p&gt;&lt;/li&gt;
&lt;li&gt;将源代码 push 到 &lt;code&gt;&amp;lt;YOUR-PROJECT&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;pre&gt;&lt;code&gt;#!/bin/bash
# 文件名：deploy.sh
echo -e &amp;quot;\033[0;32mDeploying updates to GitHub...\033[0m&amp;quot;
Date=`date &amp;quot;+%Y-%m-%d %H:%M:%S&amp;quot;`

# Build the project.
hugo

# Go To Public folder
cd public

# Add changes to git.
git add -A

# Commit changes.
msg=&amp;quot;rebuilding site ${Date}&amp;quot;
if [ $# -eq 1 ]
  then msg=&amp;quot;$1&amp;quot;
fi
git commit -m &amp;quot;$msg&amp;quot;

# Push source and build repos.
git push origin master

# Come Back up to the Project Root
cd ..
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;现在！您的个人页面成功地部署在 &lt;code&gt;https://&amp;lt;USERNAME&amp;gt;.github.io&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=#778899&gt;补充：如果需要指定 Hugo 生成网站的输出目录，可以在配置文件中 config.toml 中设置变量 publishDir = &#34;docs&#34;. &lt;/font&gt;&lt;/p&gt;

&lt;h2 id=&#34;二-b-通过两个分支来创建-github-pages-b&#34;&gt;二、&lt;b&gt;通过两个分支来创建 GitHub Pages&lt;/b&gt;&lt;/h2&gt;

&lt;p&gt;我们还可以指定默认分支来托管源代码，并将发布的站点指向单独的分支，虽然比上面的方法复杂，但他的优点在于：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;只用一个仓库，方便维护和版本控制&lt;/li&gt;
&lt;li&gt;直接使用默认的 &lt;em&gt;public&lt;/em&gt; 目录，不必指定 Git 子模块或输出目录&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;我们需要到仓库中新建一个托管源代码的分支，并设置为默认分支&lt;font color=#F08080&gt;（非 master 分支）&lt;/font&gt;，设置方法如下&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;进入仓库 &lt;code&gt;https://&amp;lt;USERNAME&amp;gt;.github.io&lt;/code&gt; ，点击导航栏的设置 &lt;font face=&#34;woff2&#34;&gt;&lt;strong&gt;Settings&lt;/strong&gt;&lt;font&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;在左侧 &lt;font face=&#34;woff2&#34;&gt;&lt;strong&gt;Options&lt;/strong&gt;&lt;font&gt; 找到 &lt;font face=&#34;woff2&#34;&gt;&lt;strong&gt;Branches&lt;/strong&gt;&lt;font&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;font face=&#34;woff2&#34;&gt;&lt;strong&gt;Default branch&lt;/strong&gt;&lt;font&gt; 选择源码托管的分支 &lt;font color=#F08080&gt;（如 hugo）&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;2-1-初始化&#34;&gt;2.1 初始化&lt;/h3&gt;

&lt;p&gt;接下来的步骤在每次 clone 下来后只需要完成一次。默认的 &lt;code&gt;（upstream&lt;/code&gt; 的名称 origin
&lt;font color=#F08080&gt;（upstream 是远程仓库在本地的简写名称，可以通过 git remote -v 来查看 ）&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;现在，我们用 &lt;code&gt;https://&amp;lt;USERNAME&amp;gt;.github.io&lt;/code&gt; 仓库，源码分支为 &lt;strong&gt;hugo&lt;/strong&gt; ，发布网站的分支为 &lt;strong&gt;master&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;克隆仓库到本地，默认分支是 &lt;strong&gt;hugo&lt;/strong&gt; &lt;p&gt; git clone &amp;lt;Repositoriy-URL&amp;gt; &lt;/br&gt; cd &amp;lt;Repositoriy&amp;gt; &lt;/p&gt;&lt;/li&gt;
&lt;li&gt;切换到 &lt;strong&gt;master&lt;/strong&gt; 分支，进行设置 &lt;p&gt;
git checkout master &lt;/br&gt;
git reset &amp;ndash;hard &lt;/br&gt;
git commit &amp;ndash;allow-empty -m &amp;ldquo;Initializing master branch&amp;rdquo; &lt;/br&gt;
git push origin master&lt;/br&gt;
git checkout master &lt;/p&gt;&lt;/li&gt;
&lt;li&gt;切换到 &lt;strong&gt;hugo&lt;/strong&gt; 分支&lt;p&gt;
echo public &amp;gt;&amp;gt; .gitignore &lt;/br&gt;
rm -rf public&lt;/br&gt;
rm -rf .git/worktrees/public/&amp;rdquo; &lt;/br&gt;
git worktree add -B master public origin/master &lt;/br&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;2-2-启动服务并push到分支&#34;&gt;2.2 启动服务并push到分支&lt;/h3&gt;

&lt;p&gt;现在我们只需要启动服务，检查网站正常运行，就可以通过脚本来push了  &lt;font color=#F08080&gt;（脚本需要 chmod +x deploy.sh）&lt;/font&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#!/bin/bash
# 文件名：deploy.sh
# 脚本：自动将public文件夹push到master分支
# 如果是用 gh-branch，将 master 替换为 gh-branch 就可以

# 日志信息
Date=`date &amp;quot;+%Y-%m-%d %H:%M:%S&amp;quot;`
alias printlog=&#39;echo ${Date} INFO&#39;

# 标记当前路径
DIR=`pwd`
printlog &amp;quot;当前目录：${DIR}&amp;quot;

printlog &amp;quot;标记 public 文件夹为 master 分支&amp;quot;
rm -rf public
rm -rf .git/worktrees/public/

git worktree add -B master public origin/master
# 清除原来的内容
rm -rf public/*

# 编译
printlog &amp;quot;正在生成网站.&amp;quot;
hugo

printlog &amp;quot;正在提交更新&amp;quot;
msg=&amp;quot;Rebuilding site ${Date} (publish.sh)&amp;quot;

# 提交
cd public &amp;amp;&amp;amp; git add --all &amp;amp;&amp;amp; git commit -m &amp;quot;${msg}&amp;quot;

printlog &amp;quot;正在 push&amp;quot;
git push origin master

printlog &amp;quot;Down!&amp;quot;

&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;h3 id=&#34;附录&#34;&gt;附录&lt;/h3&gt;

&lt;p&gt;知识点：&lt;/p&gt;

&lt;p&gt;git worktree&lt;/p&gt;

&lt;p&gt;利用 upstream 标记更多的远程仓库地址&lt;/p&gt;

&lt;p&gt;脚本中获取相对路径 DIR=$(dirname &amp;ldquo;$0&amp;rdquo;)&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Page Resources</title>
      <link>panfeng0119.github.io/post/pagesource/</link>
      <pubDate>Fri, 14 Sep 2018 00:00:00 +0800</pubDate>
      
      <guid>panfeng0119.github.io/post/pagesource/</guid>
      <description>

&lt;p&gt;&lt;a href=&#34;https://gohugo.io/categories/content-management&#34; target=&#34;_blank&#34;&gt;CONTENT MANAGEMENT&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&#34;page-resources&#34;&gt;Page Resources&lt;/h1&gt;

&lt;h1 id=&#34;resourcetype&#34;&gt;ResourceType&lt;/h1&gt;

&lt;p&gt;The main type of the resource. For example, a file of MIME type image/jpg has for ResourceType image.
Name
Default value is the filename (relative to the owning page). Can be set in front matter.
Title
Default blank. Can be set in front matter.
Permalink
The absolute URL to the resource. Resources of type page will have no value.
RelPermalink
The relative URL to the resource. Resources of type page will have no value.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Example Talk</title>
      <link>panfeng0119.github.io/talk/example-talk/</link>
      <pubDate>Sun, 01 Jan 2017 00:00:00 +0800</pubDate>
      
      <guid>panfeng0119.github.io/talk/example-talk/</guid>
      <description>&lt;p&gt;Embed your slides or video here using &lt;a href=&#34;https://sourcethemes.com/academic/post/writing-markdown-latex/&#34; target=&#34;_blank&#34;&gt;shortcodes&lt;/a&gt;. Further details can easily be added using &lt;em&gt;Markdown&lt;/em&gt; and $\rm \LaTeX$ math code.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>example - Deep Learning</title>
      <link>panfeng0119.github.io/project/deep-learning/</link>
      <pubDate>Wed, 27 Apr 2016 00:00:00 +0800</pubDate>
      
      <guid>panfeng0119.github.io/project/deep-learning/</guid>
      <description>&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.&lt;/p&gt;

&lt;p&gt;Nullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.&lt;/p&gt;

&lt;p&gt;Cras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.&lt;/p&gt;

&lt;p&gt;Suspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.&lt;/p&gt;

&lt;p&gt;Aliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>A Person Re-Identification System For Mobile Devices</title>
      <link>panfeng0119.github.io/publication/person-re-identification/</link>
      <pubDate>Tue, 01 Sep 2015 00:00:00 +0800</pubDate>
      
      <guid>panfeng0119.github.io/publication/person-re-identification/</guid>
      <description>&lt;p&gt;More detail can easily be written here using &lt;em&gt;Markdown&lt;/em&gt; and $\rm \LaTeX$ math code.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>example - Mobile visual clothing search</title>
      <link>panfeng0119.github.io/publication/clothing-search/</link>
      <pubDate>Mon, 01 Jul 2013 00:00:00 +0800</pubDate>
      
      <guid>panfeng0119.github.io/publication/clothing-search/</guid>
      <description>&lt;p&gt;More detail can easily be written here using &lt;em&gt;Markdown&lt;/em&gt; and $\rm \LaTeX$ math code.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
